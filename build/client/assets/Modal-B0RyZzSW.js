import{R as a,r as c}from"./index-DIrg4KX8.js";import{M as Y,d as g,y as fe,z as pe,D as ge,p as N,e as h,E as H,K as O,F as Ee,G as he,H as ve,J as be,v as Me,T as Z,u as ee,B as ye,I as S,N as V,w as Fe,W as ke,O as Ce,Q as xe,R as Se}from"./Page-Ca4k7FYh.js";import{E as Ne,p as Pe,u as Ie}from"./context-6NiORI7R.js";import{S as we,F as De}from"./context-Bxa3xaph.js";import{_ as Te,a as Be,b as Le,T as $,c as _e,C as He}from"./CSSTransition-BiEcohmw.js";var te=function(t){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),a.createElement("path",{d:"M13.97 15.03a.75.75 0 1 0 1.06-1.06l-3.97-3.97 3.97-3.97a.75.75 0 0 0-1.06-1.06l-3.97 3.97-3.97-3.97a.75.75 0 0 0-1.06 1.06l3.97 3.97-3.97 3.97a.75.75 0 1 0 1.06 1.06l3.97-3.97 3.97 3.97Z"}))};te.displayName="XIcon";var L={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function Oe(){const e=c.useContext(we);if(!e)throw new Y("No ScrollLockManager was provided.");return e}function Re(e){const t=Oe();return c.useEffect(()=>(t.registerScrollLock(),()=>{t.unregisterScrollLock()}),[t]),null}function Ae(e){const{onClick:t,onTouchStart:i,belowNavigation:r,transparent:n,setClosing:o}=e,s=g(L.Backdrop,r&&L.belowNavigation,n&&L.transparent),d=()=>{o&&o(!0)},l=()=>{o&&o(!1),t&&t()};return a.createElement(a.Fragment,null,a.createElement(Re,null),a.createElement("div",{className:s,onClick:l,onTouchStart:i,onMouseDown:d}))}var je={InlineGrid:"Polaris-InlineGrid"};function Ue({children:e,columns:t,gap:i,alignItems:r}){const n={...pe("inline-grid","grid-template-columns",Ge(t)),...fe("inline-grid","gap","space",i),"--pc-inline-grid-align-items":r};return a.createElement("div",{className:je.InlineGrid,style:ge(n)},e)}function Ge(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([t,i])=>[t,K(i)])):K(e)}function K(e){if(e)return typeof e=="number"||!isNaN(Number(e))?`repeat(${Number(e)}, minmax(0, 1fr))`:typeof e=="string"?e:e.map(t=>{switch(t){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const We=c.createContext(void 0),ze=c.memo(function({children:t,disabled:i,root:r}){return c.useEffect(()=>{if(i||!r)return;const n=Ve(r)?r.current:r;!n||n.querySelector("[autofocus]")||N(n,!1)},[i,r]),a.createElement(a.Fragment,null,t)});function Ve(e){return e.current!==void 0}function $e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){var i=function(o){return t&&c.isValidElement(o)?t(o):o},r=Object.create(null);return e&&c.Children.map(e,function(n){return n}).forEach(function(n){r[n.key]=i(n)}),r}function Ke(e,t){e=e||{},t=t||{};function i(f){return f in t?t[f]:e[f]}var r=Object.create(null),n=[];for(var o in e)o in t?n.length&&(r[o]=n,n=[]):n.push(o);var s,d={};for(var l in t){if(r[l])for(s=0;s<r[l].length;s++){var m=r[l][s];d[r[l][s]]=i(m)}d[l]=i(l)}for(s=0;s<n.length;s++)d[n[s]]=i(n[s]);return d}function b(e,t,i){return i[t]!=null?i[t]:e.props[t]}function Xe(e,t){return R(e.children,function(i){return c.cloneElement(i,{onExited:t.bind(null,i),in:!0,appear:b(i,"appear",e),enter:b(i,"enter",e),exit:b(i,"exit",e)})})}function qe(e,t,i){var r=R(e.children),n=Ke(t,r);return Object.keys(n).forEach(function(o){var s=n[o];if(c.isValidElement(s)){var d=o in t,l=o in r,m=t[o],f=c.isValidElement(m)&&!m.props.in;l&&(!d||f)?n[o]=c.cloneElement(s,{onExited:i.bind(null,s),in:!0,exit:b(s,"exit",e),enter:b(s,"enter",e)}):!l&&d&&!f?n[o]=c.cloneElement(s,{in:!1}):l&&d&&c.isValidElement(m)&&(n[o]=c.cloneElement(s,{onExited:i.bind(null,s),in:m.props.in,exit:b(s,"exit",e),enter:b(s,"enter",e)}))}}),n}var Je=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Qe={component:"div",childFactory:function(t){return t}},A=function(e){Te(t,e);function t(r,n){var o;o=e.call(this,r,n)||this;var s=o.handleExited.bind($e(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(n,o){var s=o.children,d=o.handleExited,l=o.firstRender;return{children:l?Xe(n,d):qe(n,s,d),firstRender:!1}},i.handleExited=function(n,o){var s=R(this.props.children);n.key in s||(n.props.onExited&&n.props.onExited(o),this.mounted&&this.setState(function(d){var l=Be({},d.children);return delete l[n.key],{children:l}}))},i.render=function(){var n=this.props,o=n.component,s=n.childFactory,d=Le(n,["component","childFactory"]),l=this.state.contextValue,m=Je(this.state.children).map(s);return delete d.appear,delete d.enter,delete d.exit,o===null?a.createElement($.Provider,{value:l},m):a.createElement($.Provider,{value:l},a.createElement(o,d,m))},t}(a.Component);A.propTypes={};A.defaultProps=Qe;var _={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},X={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function ne({children:e,flush:t=!1,subdued:i=!1,titleHidden:r=!1}){const n=g(X.Section,r&&X.titleHidden);return a.createElement("div",{className:n},a.createElement(h,Object.assign({as:"section",padding:t?"0":"400"},r&&{paddingInlineEnd:"0"},i&&{background:"bg-surface-tertiary"}),e))}var u={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function Ye({trapping:e}){const t=c.useContext(De),i=c.useId();if(!t)throw new Y("No FocusManager was provided.");const{trapFocusList:r,add:n,remove:o}=t,s=r[0]===i,d=c.useMemo(()=>({canSafelyFocus:s}),[s]);return c.useEffect(()=>{if(e)return n(i),()=>{o(i)}},[n,i,o,e]),d}function Ze({trapping:e=!0,children:t}){const{canSafelyFocus:i}=Ye({trapping:e}),r=c.useRef(null),[n,o]=c.useState(!0);c.useEffect(()=>{const l=i&&!(r.current&&r.current.contains(document.activeElement))?!e:!0;o(l)},[i,e]);const s=l=>{const m=r.current&&r.current.contains(document.activeElement);e===!1||!r.current||m||l.target instanceof Element&&l.target.matches(`${Pe.selector} *`)||i&&l.target instanceof HTMLElement&&r.current!==l.target&&!r.current.contains(l.target)&&N(r.current)},d=l=>{if(e===!1||!r.current)return;const m=Ee(r.current),f=he(r.current);l.target===f&&!l.shiftKey&&(l.preventDefault(),ve(r.current)),l.target===m&&l.shiftKey&&(l.preventDefault(),be(r.current))};return a.createElement(ze,{disabled:n,root:r.current},a.createElement("div",{ref:r},a.createElement(Ne,{event:"focusin",handler:s}),a.createElement(H,{keyCode:O.Tab,keyEvent:"keydown",handler:d}),t))}function et({instant:e,labelledBy:t,children:i,limitHeight:r,size:n,onClose:o,onExited:s,onEntered:d,setClosing:l,hasToasts:m,...f}){const P=Ie(),E=c.useRef(null),F=c.useContext(We);let M;F&&(M=F.toastMessages);const I=g(u.Modal,n&&u[Me("size",n)],r&&u.limitHeight),p=e?_e:nt;c.useEffect(()=>{E.current&&!E.current.contains(document.activeElement)&&N(E.current)},[]);const w=()=>{l&&l(!0)},k=()=>{l&&l(!1),o()},C=a.createElement("div",{"aria-live":"assertive"},M?M.map(y=>a.createElement(Z,{visuallyHidden:!0,as:"p",key:y.id},y.content)):null);return a.createElement(p,Object.assign({},f,{nodeRef:E,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(P.motion["motion-duration-200"],10),onEntered:d,onExited:s}),a.createElement("div",{className:u.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:E},a.createElement(Ze,null,a.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":t,"aria-labelledby":t,tabIndex:-1,className:u.Dialog},a.createElement("div",{className:I},a.createElement(H,{keyCode:O.Escape,keyEvent:"keydown",handler:w}),a.createElement(H,{keyCode:O.Escape,handler:k}),i),C))))}const tt={appear:g(u.animateFadeUp,u.entering),appearActive:g(u.animateFadeUp,u.entered),enter:g(u.animateFadeUp,u.entering),enterActive:g(u.animateFadeUp,u.entered),exit:g(u.animateFadeUp,u.exiting),exitActive:g(u.animateFadeUp,u.exited)};function nt({children:e,...t}){return a.createElement(He,Object.assign({},t,{classNames:tt}),e)}function q({pressed:e,onClick:t}){const i=ee();return a.createElement(ye,{variant:"tertiary",pressed:e,icon:te,onClick:t,accessibilityLabel:i.translate("Polaris.Common.close")})}function rt({id:e,children:t,closing:i,titleHidden:r,onClose:n}){return r||!t?a.createElement(h,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},a.createElement(q,{onClick:n})):a.createElement(h,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},a.createElement(Ue,{columns:{xs:"1fr auto"},gap:"400"},a.createElement(S,{gap:"400",blockAlign:"center"},a.createElement(Z,{id:e,as:"h2",variant:"headingMd",breakWord:!0},t)),a.createElement(q,{pressed:i,onClick:n})))}function at({primaryAction:e,secondaryActions:t,children:i}){const r=e&&V(e,{variant:"primary"})||null,n=t&&V(t)||null,o=r||n?a.createElement(S,{gap:"200"},n,r):null;return a.createElement(S,{gap:"400",blockAlign:"center"},a.createElement(h,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},a.createElement(S,{gap:"400",blockAlign:"center",align:"space-between"},a.createElement(h,null,i),o)))}const J=200,it=400,ot=function({children:t,title:i,titleHidden:r=!1,src:n,iFrameName:o,open:s,instant:d,sectioned:l,loading:m,size:f,limitHeight:P,footer:E,primaryAction:F,secondaryActions:M,onScrolledToBottom:I,activator:p,activatorWrapper:w="div",onClose:k,onIFrameLoad:C,onTransitionEnd:y,noScroll:re}){const[ae,D]=c.useState(J),[ie,j]=c.useState(!1),U=c.useId(),G=c.useRef(null),oe=ee().translate("Polaris.Modal.iFrameTitle");let W,z;const le=c.useCallback(()=>{y&&y()},[y]),se=c.useCallback(()=>{D(J);const v=p&&Q(p)?p&&p.current:G.current;v&&requestAnimationFrame(()=>N(v))},[p]),ce=c.useCallback(v=>{const x=v.target;if(x&&x.contentWindow)try{D(x.contentWindow.document.body.scrollHeight)}catch{D(it)}C!=null&&C(v)},[C]);if(s){const v=!E&&!F&&!M?null:a.createElement(at,{primaryAction:F,secondaryActions:M},E),x=l?Fe(t,ne,{titleHidden:r}):t,B=m?a.createElement(h,{padding:"400"},a.createElement(S,{gap:"400",align:"center",blockAlign:"center"},a.createElement(Se,null))):x,ue=re?a.createElement("div",{className:_.NoScrollBody},a.createElement(h,{width:"100%",overflowX:"hidden",overflowY:"hidden"},B)):a.createElement(xe,{shadow:!0,className:_.Body,onScrolledToBottom:I},B),me=n?a.createElement("iframe",{name:o,title:oe,src:n,className:_.IFrame,onLoad:ce,style:{height:`${ae}px`}}):ue;W=a.createElement(et,{instant:d,labelledBy:U,onClose:k,onEntered:le,onExited:se,size:f,limitHeight:P,setClosing:j},a.createElement(rt,{titleHidden:r,id:U,closing:ie,onClose:k},i),me,v),z=a.createElement(Ae,{setClosing:j,onClick:k})}const T=!d,de=p&&!Q(p)?a.createElement(h,{ref:G,as:w},p):null;return a.createElement(ke.Provider,{value:!0},de,a.createElement(Ce,{idPrefix:"modal"},a.createElement(A,{appear:T,enter:T,exit:T},W),z))};function Q(e){return Object.prototype.hasOwnProperty.call(e,"current")}ot.Section=ne;export{ot as M};
