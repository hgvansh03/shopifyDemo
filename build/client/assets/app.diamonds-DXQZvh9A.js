import{r as x,R as c,j as r}from"./index-DIrg4KX8.js";import{u as le}from"./components-4iL-Yhb0.js";import{K as j,d as M,T as m,L as ee,l as q,h as oe,I as W,b as S,c as J,B as V,P as ce,C as H,a as ue}from"./Page-Ca4k7FYh.js";import{T as Q}from"./Thumbnail-xjyCNwAm.js";import{T as he,L as k}from"./TitleBar-C3pslk-9.js";import{T as pe}from"./Tabs-rCLMjOrr.js";import{S as Y}from"./Select-0Rl7DaRo.js";import{d as de,E as me}from"./context-6NiORI7R.js";import{F as be}from"./context-CNkCKnd3.js";import{D as fe}from"./DataTable-D7lJGE9G.js";import"./Image-DqtWbd5n.js";import"./Modal-B0RyZzSW.js";import"./context-Bxa3xaph.js";import"./CSSTransition-BiEcohmw.js";import"./FormLayout-pJDZu5ec.js";function ge(l,i,t){return l<i?i:l>t?t:l}var A={RangeSlider:"Polaris-RangeSlider","Track--dashed-after":"Polaris-RangeSlider--trackDashedAfter","Track--dashed":"Polaris-RangeSlider--trackDashed"},p={DualThumb:"Polaris-RangeSlider-DualThumb",TrackWrapper:"Polaris-RangeSlider-DualThumb__TrackWrapper",disabled:"Polaris-RangeSlider-DualThumb--disabled",Track:"Polaris-RangeSlider-DualThumb__Track",error:"Polaris-RangeSlider-DualThumb--error",Thumbs:"Polaris-RangeSlider-DualThumb__Thumbs",Prefix:"Polaris-RangeSlider-DualThumb__Prefix",Suffix:"Polaris-RangeSlider-DualThumb__Suffix",Output:"Polaris-RangeSlider-DualThumb__Output",OutputBubble:"Polaris-RangeSlider-DualThumb__OutputBubble"},d=function(l){return l[l.Lower=0]="Lower",l[l.Upper=1]="Upper",l}(d||{});class te extends x.Component{constructor(...i){super(...i),this.state={value:K(this.props.value,this.props.min,this.props.max,this.props.step),trackWidth:0,trackLeft:0},this.track=x.createRef(),this.trackWrapper=x.createRef(),this.thumbLower=x.createRef(),this.thumbUpper=x.createRef(),this.setTrackPosition=de(()=>{if(this.track.current){const{width:e,left:n}=this.track.current.getBoundingClientRect(),o=e-16,s=n+16/2,u=this.props.max-this.props.min,h=this.props.min/u*o;this.setState({trackWidth:o,trackLeft:s-h})}},40,{leading:!0,trailing:!0,maxWait:40}),this.handleMouseDownThumbLower=t=>{t.button!==0||this.props.disabled||($(this.handleMouseMoveThumbLower),t.stopPropagation())},this.handleMouseMoveThumbLower=t=>{const e=this.state.value[1];this.setValue([this.actualXPosition(t.clientX),e],d.Upper)},this.handleTouchStartThumbLower=t=>{this.props.disabled||(O(this.handleTouchMoveThumbLower),t.stopPropagation())},this.handleTouchMoveThumbLower=t=>{t.preventDefault();const e=this.state.value[1];this.setValue([this.actualXPosition(t.touches[0].clientX),e],d.Upper)},this.handleMouseDownThumbUpper=t=>{t.button!==0||this.props.disabled||($(this.handleMouseMoveThumbUpper),t.stopPropagation())},this.handleMouseMoveThumbUpper=t=>{const e=this.state.value[0];this.setValue([e,this.actualXPosition(t.clientX)],d.Lower)},this.handleTouchStartThumbUpper=t=>{this.props.disabled||(O(this.handleTouchMoveThumbUpper),t.stopPropagation())},this.handleTouchMoveThumbUpper=t=>{t.preventDefault();const e=this.state.value[0];this.setValue([e,this.actualXPosition(t.touches[0].clientX)],d.Lower)},this.handleKeypressLower=t=>{if(this.props.disabled)return;const{incrementValueLower:e,decrementValueLower:n}=this,s={[j.UpArrow]:e,[j.RightArrow]:e,[j.DownArrow]:n,[j.LeftArrow]:n}[t.keyCode];s!=null&&(t.preventDefault(),t.stopPropagation(),s())},this.handleKeypressUpper=t=>{if(this.props.disabled)return;const{incrementValueUpper:e,decrementValueUpper:n}=this,s={[j.UpArrow]:e,[j.RightArrow]:e,[j.DownArrow]:n,[j.LeftArrow]:n}[t.keyCode];s!=null&&(t.preventDefault(),t.stopPropagation(),s())},this.incrementValueLower=()=>{this.setValue([this.state.value[0]+this.props.step,this.state.value[1]],d.Upper)},this.decrementValueLower=()=>{this.setValue([this.state.value[0]-this.props.step,this.state.value[1]],d.Upper)},this.incrementValueUpper=()=>{this.setValue([this.state.value[0],this.state.value[1]+this.props.step],d.Lower)},this.decrementValueUpper=()=>{this.setValue([this.state.value[0],this.state.value[1]-this.props.step],d.Lower)},this.dispatchValue=()=>{const{onChange:t,id:e}=this.props,{value:n}=this.state;t(n,e)},this.setValue=(t,e)=>{const{props:{min:n,max:o,step:s},state:{value:u}}=this,h=K(t,n,o,s,e);G(h,u)===!1&&this.setState({value:h},this.dispatchValue)},this.handleMouseDownTrack=t=>{if(t.button!==0||this.props.disabled)return;t.preventDefault();const e=this.actualXPosition(t.clientX),{value:n}=this.state,o=Math.abs(n[0]-e),s=Math.abs(n[1]-e);o<=s?(this.setValue([e,n[1]],d.Upper),$(this.handleMouseMoveThumbLower),this.thumbLower.current!=null&&this.thumbLower.current.focus()):(this.setValue([n[0],e],d.Lower),$(this.handleMouseMoveThumbUpper),this.thumbUpper.current!=null&&this.thumbUpper.current.focus())},this.handleTouchStartTrack=t=>{if(this.props.disabled)return;t.preventDefault();const e=this.actualXPosition(t.touches[0].clientX),{value:n}=this.state,o=Math.abs(n[0]-e),s=Math.abs(n[1]-e);o<=s?(this.setValue([e,n[1]],d.Upper),O(this.handleTouchMoveThumbLower),this.thumbLower.current!=null&&this.thumbLower.current.focus()):(this.setValue([n[0],e],d.Lower),O(this.handleTouchMoveThumbUpper),this.thumbUpper.current!=null&&this.thumbUpper.current.focus())},this.actualXPosition=t=>{if(this.track.current){const{min:e,max:n}=this.props,{trackLeft:o,trackWidth:s}=this.state;return(t-o)/s*(n-e)}else return 0}}static getDerivedStateFromProps(i,t){const{min:e,step:n,max:o,value:s,onChange:u,id:h}=i,{prevValue:f}=t;if(G(f,s))return null;const b=K(s,e,o,n);return G(s,b)||u(b,h),{prevValue:s,value:b}}componentDidMount(){this.setTrackPosition(),this.trackWrapper.current!=null&&this.trackWrapper.current.addEventListener("touchstart",this.handleTouchStartTrack,{passive:!1})}componentWillUnmount(){this.trackWrapper.current!=null&&this.trackWrapper.current.removeEventListener("touchstart",this.handleTouchStartTrack)}render(){const{id:i,min:t,max:e,prefix:n,suffix:o,disabled:s,output:u,error:h,onFocus:f,onBlur:b,label:L,labelAction:a,labelHidden:g,helpText:D}=this.props,{value:v}=this.state,P=i,T=`${i}Upper`,y=[];h&&y.push(`${i}Error`);const N=y.length?y.join(" "):void 0,B=M(p.TrackWrapper,h&&p.error,s&&p.disabled),I=M(p.Thumbs,p.ThumbLower,s&&p.disabled),X=M(p.Thumbs,p.ThumbUpper,s&&p.disabled),R=this.state.trackWidth,U=e-t,F=t/U*R,E=v[0]/U*R-F,C=v[1]/U*R-F,z=M(p.Output,p.OutputLower),_=!s&&u?c.createElement("output",{htmlFor:P,className:z,style:{left:`${E}px`}},c.createElement("div",{className:p.OutputBubble},c.createElement(m,{as:"span",variant:"headingSm",alignment:"center"},v[0]))):null,ae=M(p.Output,p.OutputUpper),re=!s&&u?c.createElement("output",{htmlFor:T,className:ae,style:{left:`${C}px`}},c.createElement("div",{className:p.OutputBubble},c.createElement(m,{as:"span",variant:"headingSm",alignment:"center"},v[1]))):null,se={"--pc-range-slider-progress-lower":`${E}px`,"--pc-range-slider-progress-upper":`${C}px`},ie=n&&c.createElement("div",{className:p.Prefix},n),ne=o&&c.createElement("div",{className:p.Suffix},o);return c.createElement(c.Fragment,null,c.createElement(ee,{id:i,label:L,error:h,action:a,labelHidden:g,helpText:D},c.createElement("div",{className:M(p.DualThumb,A.RangeSlider)},ie,c.createElement("div",{className:B,onMouseDown:this.handleMouseDownTrack,ref:this.trackWrapper},c.createElement("div",{className:p.Track,style:se,ref:this.track}),c.createElement("div",{className:A["Track--dashed"]}),c.createElement("div",{id:P,className:I,style:{left:`${E}px`},role:"slider","aria-disabled":s,"aria-valuemin":t,"aria-valuemax":e,"aria-valuenow":v[0],"aria-invalid":!!h,"aria-describedby":N,"aria-labelledby":q(i),onFocus:f,onBlur:b,tabIndex:0,onKeyDown:this.handleKeypressLower,onMouseDown:this.handleMouseDownThumbLower,onTouchStart:this.handleTouchStartThumbLower,ref:this.thumbLower}),_,c.createElement("div",{id:T,className:X,style:{left:`${C}px`},role:"slider","aria-disabled":s,"aria-valuemin":t,"aria-valuemax":e,"aria-valuenow":v[1],"aria-invalid":!!h,"aria-describedby":N,"aria-labelledby":q(i),onFocus:f,onBlur:b,tabIndex:0,onKeyDown:this.handleKeypressUpper,onMouseDown:this.handleMouseDownThumbUpper,onTouchStart:this.handleTouchStartThumbUpper,ref:this.thumbUpper}),re),ne)),c.createElement(me,{event:"resize",handler:this.setTrackPosition}))}}te.contextType=be;function $(l){document.addEventListener("mousemove",l),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",l)},{once:!0})}function O(l){const i=()=>{document.removeEventListener("touchmove",l),document.removeEventListener("touchend",i),document.removeEventListener("touchcancel",i)};document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",i,{once:!0}),document.addEventListener("touchcancel",i,{once:!0})}function K(l,i,t,e,n=d.Upper){let o=f(L(l[1])),s=b(L(l[0]));const u=o-e,h=s+e;return n===d.Upper&&s>u?s=u:n===d.Lower&&o<h&&(o=h),[s,o];function f(a){const g=i+e;return a<g?g:a>t?t:a}function b(a){const g=t-e;return a<i?i:a>g?g:a}function L(a){return Math.round(a/e)*e}}function G(l,i){return l==null||i==null?!1:l[0]===i[0]&&l[1]===i[1]}var w={SingleThumb:"Polaris-RangeSlider-SingleThumb",disabled:"Polaris-RangeSlider-SingleThumb--disabled",InputWrapper:"Polaris-RangeSlider-SingleThumb__InputWrapper",Prefix:"Polaris-RangeSlider-SingleThumb__Prefix",Suffix:"Polaris-RangeSlider-SingleThumb__Suffix",Input:"Polaris-RangeSlider-SingleThumb__Input",error:"Polaris-RangeSlider-SingleThumb--error",Output:"Polaris-RangeSlider-SingleThumb__Output",OutputBubble:"Polaris-RangeSlider-SingleThumb__OutputBubble"};function ve(l){return Math.sign(l)===1?-Math.abs(l):Math.sign(l)===-1?Math.abs(l):0}function Te(l){const{id:i,error:t,helpText:e,value:n,min:o,max:s,disabled:u,output:h,prefix:f,suffix:b,label:L,labelAction:a,labelHidden:g,step:D,onBlur:v,onFocus:P}=l,T=ge(n,o,s),y=[];t&&y.push(`${i}Error`),e&&y.push(oe(i));const N=y.length?y.join(" "):void 0,B=(T-o)*100/(s-o),I=ve((B-50)/100),X={"--pc-range-slider-min":o,"--pc-range-slider-max":s,"--pc-range-slider-current":T,"--pc-range-slider-progress":`${B}%`,"--pc-range-slider-output-factor":`${I}`},R=!u&&h&&c.createElement("output",{htmlFor:i,className:w.Output},c.createElement("div",{className:w.OutputBubble},c.createElement(m,{as:"span",variant:"headingSm",alignment:"center"},T))),U=f&&c.createElement("div",{className:w.Prefix},f),F=b&&c.createElement("div",{className:w.Suffix},b),E=M(w.SingleThumb,A.RangeSlider,t&&w.error,u&&w.disabled);return c.createElement(ee,{id:i,label:L,error:t,action:a,labelHidden:g,helpText:e},c.createElement("div",{className:E,style:X},U,c.createElement("div",{className:M(w.InputWrapper,A["Track--dashed-after"])},c.createElement("input",{type:"range",className:w.Input,id:i,name:i,min:o,max:s,step:D,value:T,disabled:u,onChange:C,onFocus:P,onBlur:v,"aria-valuemin":o,"aria-valuemax":s,"aria-valuenow":T,"aria-invalid":!!t,"aria-describedby":N}),R),F));function C(z){const{onChange:_}=l;_&&_(parseFloat(z.currentTarget.value),i)}}function Z({min:l=0,max:i=100,step:t=1,value:e,...n}){const s={id:x.useId(),min:l,max:i,step:t,...n};return xe(e)?c.createElement(te,Object.assign({value:e},s)):c.createElement(Te,Object.assign({value:e},s))}function xe(l){return Array.isArray(l)}const Se=["Round","Princess","Cushion","Emerald","Oval","Radiant","Asscher","Marquise","Heart","Pear"];function Fe(){const{diamonds:l}=le(),[i,t]=x.useState(0),[e,n]=x.useState({shape:"all",caratRange:[.5,3],colorRange:["D","N"],clarityRange:["FL","I3"],priceRange:[1e3,2e4],type:"all"}),[o,s]=x.useState(""),[u,h]=x.useState(!1),f=l.filter(a=>{const g=a.certificateNumber.toLowerCase().includes(o.toLowerCase()),D=e.shape==="all"||a.shape===e.shape,v=a.carat>=e.caratRange[0]&&a.carat<=e.caratRange[1],P=a.price>=e.priceRange[0]&&a.price<=e.priceRange[1],T=e.type==="all"||a.type===e.type;return g&&D&&v&&P&&T}),b=[{id:"inventory",content:"Diamond Inventory",panelID:"inventory-panel"},{id:"comparison",content:"Diamond Comparison",panelID:"comparison-panel"}],L=f.map(a=>[r.jsxs(W,{gap:"300",children:[r.jsx(Q,{source:a.imageUrl,alt:`${a.shape} Diamond`,size:"small"}),r.jsxs(S,{gap:"025",children:[r.jsxs(m,{variant:"bodyMd",fontWeight:"medium",children:[a.carat,"ct ",a.shape]}),r.jsx(m,{variant:"bodySm",tone:"subdued",children:a.certificateNumber})]})]},a.id),r.jsx(J,{tone:a.type==="Natural"?"success":"info",children:a.type},a.type),`${a.color} / ${a.clarity}`,a.cut,`$${a.price.toLocaleString()}`,r.jsxs(W,{gap:"200",children:[r.jsx(V,{size:"slim",onClick:()=>console.log("View",a.id),children:"View Details"}),r.jsx(V,{size:"slim",variant:"primary",onClick:()=>console.log("Add to jewelry",a.id),children:"Add to Jewelry"})]},`actions-${a.id}`)]);return r.jsxs(ce,{children:[r.jsx(he,{title:"Diamond Inventory",children:r.jsx(V,{variant:"primary",onClick:()=>console.log("Import diamonds"),children:"Import Diamonds"})}),r.jsx(k,{children:r.jsx(k.Section,{children:r.jsx(H,{children:r.jsxs(pe,{tabs:b,selected:i,onSelect:t,children:[i===0&&r.jsxs(S,{gap:"400",children:[r.jsxs(W,{gap:"400",align:"space-between",children:[r.jsx("div",{style:{flexGrow:1},children:r.jsx(ue,{label:"Search diamonds",value:o,onChange:s,placeholder:"Search by certificate number...",clearButton:!0,onClearButtonClick:()=>s("")})}),r.jsx(V,{onClick:()=>h(!u),children:u?"Hide Filters":"Show Filters"})]}),u&&r.jsx(H,{children:r.jsxs(S,{gap:"400",children:[r.jsx(m,{variant:"headingMd",children:"Filter Diamonds"}),r.jsxs(k,{children:[r.jsx(k.Section,{variant:"oneThird",children:r.jsx(Y,{label:"Shape",options:[{label:"All Shapes",value:"all"},...Se.map(a=>({label:a,value:a}))],value:e.shape,onChange:a=>n({...e,shape:a})})}),r.jsx(k.Section,{variant:"oneThird",children:r.jsx(Y,{label:"Type",options:[{label:"All Types",value:"all"},{label:"Natural",value:"Natural"},{label:"Lab Grown",value:"Lab Grown"}],value:e.type,onChange:a=>n({...e,type:a})})})]}),r.jsxs(S,{gap:"300",children:[r.jsxs(m,{variant:"bodyMd",children:["Carat Range: ",e.caratRange[0]," - ",e.caratRange[1]]}),r.jsx(Z,{label:"Carat weight",value:e.caratRange,onChange:a=>n({...e,caratRange:a}),min:.5,max:3,step:.1})]}),r.jsxs(S,{gap:"300",children:[r.jsxs(m,{variant:"bodyMd",children:["Price Range: $",e.priceRange[0].toLocaleString()," - $",e.priceRange[1].toLocaleString()]}),r.jsx(Z,{label:"Price range",value:e.priceRange,onChange:a=>n({...e,priceRange:a}),min:1e3,max:2e4,step:100})]})]})}),r.jsx(fe,{columnContentTypes:["text","text","text","text","text","text"],headings:["Diamond","Type","Color/Clarity","Cut","Price","Actions"],rows:L,pagination:{hasNext:!1,hasPrevious:!1}})]}),i===1&&r.jsxs(S,{gap:"400",children:[r.jsx(m,{variant:"headingMd",children:"Compare Diamonds Side by Side"}),r.jsx(k,{children:f.slice(0,3).map(a=>r.jsx(k.Section,{variant:"oneThird",children:r.jsx(H,{children:r.jsxs(S,{gap:"300",children:[r.jsx(Q,{source:a.imageUrl,alt:`${a.shape} Diamond`,size:"large"}),r.jsxs(S,{gap:"200",children:[r.jsxs(m,{variant:"headingMd",children:[a.carat,"ct ",a.shape]}),r.jsx(W,{gap:"200",children:r.jsx(J,{tone:a.type==="Natural"?"success":"info",children:a.type})}),r.jsxs(S,{gap:"100",children:[r.jsxs(m,{variant:"bodyMd",children:[r.jsx("strong",{children:"Color:"})," ",a.color]}),r.jsxs(m,{variant:"bodyMd",children:[r.jsx("strong",{children:"Clarity:"})," ",a.clarity]}),r.jsxs(m,{variant:"bodyMd",children:[r.jsx("strong",{children:"Cut:"})," ",a.cut]}),r.jsxs(m,{variant:"bodyMd",children:[r.jsx("strong",{children:"Certificate:"})," ",a.certificateNumber]})]}),r.jsxs(m,{variant:"headingLg",tone:"success",children:["$",a.price.toLocaleString()]}),r.jsx(V,{variant:"primary",fullWidth:!0,children:"Select This Diamond"})]})]})})},a.id))})]})]})})})})]})}export{Fe as default};
