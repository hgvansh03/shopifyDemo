import{R as e,r as n}from"./index-DIrg4KX8.js";import{u as X,T as we,o as Be,p as G,a as Ae,d as S,f as Ce,q as Ve,r as Ze,A as Ye,U as $e,s as je,t as et,I as tt,c as at,x as nt,e as st,j as ot}from"./Page-Ca4k7FYh.js";import{l as rt}from"./context-6NiORI7R.js";import{M as j}from"./Modal-B0RyZzSW.js";import{F as Ie}from"./FormLayout-pJDZu5ec.js";var xe=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{d:"M11.5 8.25a.75.75 0 0 1 .75.75v4.25a.75.75 0 0 1-1.5 0v-4.25a.75.75 0 0 1 .75-.75Z"}),e.createElement("path",{d:"M9.25 9a.75.75 0 0 0-1.5 0v4.25a.75.75 0 0 0 1.5 0v-4.25Z"}),e.createElement("path",{fillRule:"evenodd",d:"M7.25 5.25a2.75 2.75 0 0 1 5.5 0h3a.75.75 0 0 1 0 1.5h-.75v5.45c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311c-.642.327-1.482.327-3.162.327h-.4c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311c-.327-.642-.327-1.482-.327-3.162v-5.45h-.75a.75.75 0 0 1 0-1.5h3Zm1.5 0a1.25 1.25 0 1 1 2.5 0h-2.5Zm-2.25 1.5h7v5.45c0 .865-.001 1.423-.036 1.848-.033.408-.09.559-.128.633a1.5 1.5 0 0 1-.655.655c-.074.038-.225.095-.633.128-.425.035-.983.036-1.848.036h-.4c-.865 0-1.423-.001-1.848-.036-.408-.033-.559-.09-.633-.128a1.5 1.5 0 0 1-.656-.655c-.037-.074-.094-.225-.127-.633-.035-.425-.036-.983-.036-1.848v-5.45Z"}))};xe.displayName="DeleteIcon";var He=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{d:"M11.25 8.5c-.414 0-.75.336-.75.75v1.25h-1.25c-.414 0-.75.336-.75.75s.336.75.75.75h1.25v1.25c0 .414.336.75.75.75s.75-.336.75-.75v-1.25h1.25c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-1.25v-1.25c0-.414-.336-.75-.75-.75Z"}),e.createElement("path",{fillRule:"evenodd",d:"M8.75 16.5c-1.438 0-2.618-1.104-2.74-2.51-1.406-.122-2.51-1.302-2.51-2.74v-5c0-1.519 1.231-2.75 2.75-2.75h5c1.438 0 2.618 1.104 2.74 2.51 1.406.122 2.51 1.302 2.51 2.74v5c0 1.519-1.231 2.75-2.75 2.75h-5Zm0-10.5c-1.519 0-2.75 1.231-2.75 2.75v3.725c-.57-.116-1-.62-1-1.225v-5c0-.69.56-1.25 1.25-1.25h5c.605 0 1.11.43 1.225 1h-3.725Zm0 1.5c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h5c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25h-5Z"}))};He.displayName="DuplicateIcon";var Ke=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{fillRule:"evenodd",d:"M15.655 4.344a2.695 2.695 0 0 0-3.81 0l-.599.599-.009-.009-1.06 1.06.008.01-5.88 5.88a2.75 2.75 0 0 0-.805 1.944v1.922a.75.75 0 0 0 .75.75h1.922a2.75 2.75 0 0 0 1.944-.806l7.54-7.539a2.695 2.695 0 0 0 0-3.81Zm-4.409 2.72-5.88 5.88a1.25 1.25 0 0 0-.366.884v1.172h1.172c.331 0 .65-.132.883-.366l5.88-5.88-1.689-1.69Zm2.75.629.599-.599a1.195 1.195 0 1 0-1.69-1.689l-.598.599 1.69 1.689Z"}))};Ke.displayName="EditIcon";var Ue=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{d:"M10 14a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-.75.75Z"}),e.createElement("path",{d:"M9 7a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z"}),e.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};Ue.displayName="InfoIcon";var ze=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{fillRule:"evenodd",d:"M3 6.75c0-2.071 1.679-3.75 3.75-3.75h6.5c2.071 0 3.75 1.679 3.75 3.75v6.5c0 2.071-1.679 3.75-3.75 3.75h-6.5c-2.071 0-3.75-1.679-3.75-3.75v-6.5Zm3.75-2.25c-1.243 0-2.25 1.007-2.25 2.25v6.5c0 1.243 1.007 2.25 2.25 2.25h.5v-11h-.5Zm4.5 11h-2.5v-11h2.5v11Zm1.5 0h.5c1.243 0 2.25-1.007 2.25-2.25v-6.5c0-1.243-1.007-2.25-2.25-2.25h-.5v11Z"}))};ze.displayName="LayoutColumns3Icon";var qe=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{d:"M10.75 5.75c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3.5h-3.5c-.414 0-.75.336-.75.75s.336.75.75.75h3.5v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5h3.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-3.5v-3.5Z"}))};qe.displayName="PlusIcon";function De({acceptCharset:t,action:r,autoComplete:o,children:p,encType:b,implicitSubmit:v=!0,method:T="post",name:a,noValidate:i,preventDefault:u=!0,target:d,onSubmit:f}){const E=X(),P=n.useCallback(C=>{u&&(C.preventDefault(),f(C))},[f,u]),h=lt(o),y=v?e.createElement(we,{as:"span",visuallyHidden:!0},e.createElement("button",{type:"submit","aria-hidden":"true",tabIndex:-1},E.translate("Polaris.Common.submit"))):null;return e.createElement("form",{acceptCharset:t,action:r,autoComplete:h,encType:b,method:T,name:a,noValidate:i,target:d,onSubmit:P},y,p)}function lt(t){return t==null?t:t?"on":"off"}function ct(){const[t,r]=n.useState(!1),o=n.useCallback(()=>r(!0),[]);return Be("touchstart",o),t}function Le(t){const r=n.useRef();return n.useEffect(()=>{r.current=t},[t]),r.current}function ke(t,r,o,p,b){const v=p.reduce((u,d)=>u+d,0),T=t.map((u,d)=>d),a=[],i=[];if(b>v)a.push(...T);else{a.push(r);let u=p[r];T.forEach(d=>{if(d!==r){const f=p[d];if(u+f>=b-o){i.push(d);return}a.push(d),u+=f}})}return{visibleTabs:a,hiddenTabs:i}}var m={Outer:"Polaris-Tabs__Outer",Wrapper:"Polaris-Tabs__Wrapper",WrapperWithNewButton:"Polaris-Tabs__WrapperWithNewButton",ButtonWrapper:"Polaris-Tabs__ButtonWrapper",Tabs:"Polaris-Tabs",Tab:"Polaris-Tabs__Tab","Tab-active":"Polaris-Tabs__Tab--active","Tab-hasActions":"Polaris-Tabs__Tab--hasActions","Tab-iconOnly":"Polaris-Tabs__Tab--iconOnly",fillSpace:"Polaris-Tabs--fillSpace",TabContainer:"Polaris-Tabs__TabContainer",fitted:"Polaris-Tabs--fitted",List:"Polaris-Tabs__List",Item:"Polaris-Tabs__Item",DisclosureTab:"Polaris-Tabs__DisclosureTab","DisclosureTab-visible":"Polaris-Tabs__DisclosureTab--visible",DisclosureActivator:"Polaris-Tabs__DisclosureActivator",TabsMeasurer:"Polaris-Tabs__TabsMeasurer",NewTab:"Polaris-Tabs__NewTab",ActionListWrap:"Polaris-Tabs__ActionListWrap",Panel:"Polaris-Tabs__Panel","Panel-hidden":"Polaris-Tabs__Panel--hidden"};const ye=40;function it({open:t,isModalLoading:r,name:o,onClose:p,onClickPrimaryAction:b,onClickSecondaryAction:v,helpText:T,viewNames:a}){const i=X(),[u,d]=n.useState(o),f=n.useRef(null),E=a==null?void 0:a.some(c=>c.trim().toLowerCase()===u.trim().toLowerCase()),P=r||E||!u||u.length>ye;n.useEffect(()=>{f.current&&t&&G(f.current)},[t]),n.useEffect(()=>{t&&d(o.slice(0,ye))},[o,t]);const h=n.useCallback(c=>{d(c)},[]);async function y(){P||(await b(u),d(""),p())}function C(){v==null||v(),d(o),p()}return e.createElement(j,{open:t,onClose:p,title:i.translate("Polaris.Tabs.DuplicateModal.title"),primaryAction:{content:i.translate("Polaris.Tabs.DuplicateModal.create"),onAction:y,disabled:P},secondaryActions:[{content:i.translate("Polaris.Tabs.DuplicateModal.cancel"),onAction:C}],instant:!0},e.createElement(j.Section,null,e.createElement(De,{onSubmit:y},e.createElement(Ie,null,e.createElement("div",{ref:f},e.createElement(Ae,{label:i.translate("Polaris.Tabs.DuplicateModal.label"),value:u,onChange:h,autoComplete:"off",helpText:T,maxLength:ye,showCharacterCount:!0,error:E?i.translate("Polaris.Tabs.DuplicateModal.errors.sameName",{name:u}):void 0}))))))}function ut({open:t,isModalLoading:r,name:o,onClose:p,onClickPrimaryAction:b,onClickSecondaryAction:v,helpText:T,viewNames:a}){const i=X(),[u,d]=n.useState(o),f=n.useRef(null),E=a==null?void 0:a.filter(c=>c!==o).some(c=>c.trim().toLowerCase()===u.trim().toLowerCase()),P=r||E||u===o||!u;n.useEffect(()=>{f.current&&t&&G(f.current)},[t]),n.useEffect(()=>{t&&d(o)},[o,t]);const h=n.useCallback(c=>{d(c)},[]);async function y(){P||(await b(u),d(""),p())}function C(){v==null||v(),d(o),p()}return e.createElement(j,{open:t,onClose:p,title:i.translate("Polaris.Tabs.RenameModal.title"),primaryAction:{content:i.translate("Polaris.Tabs.RenameModal.create"),onAction:y,disabled:P},secondaryActions:[{content:i.translate("Polaris.Tabs.RenameModal.cancel"),onAction:C}],instant:!0},e.createElement(j.Section,null,e.createElement(De,{onSubmit:y},e.createElement(Ie,null,e.createElement("div",{ref:f},e.createElement(Ae,{label:i.translate("Polaris.Tabs.RenameModal.label"),value:u,onChange:h,autoComplete:"off",helpText:T,maxLength:40,showCharacterCount:!0,error:E?i.translate("Polaris.Tabs.RenameModal.errors.sameName",{name:u}):void 0}))))))}const ue=n.forwardRef(({content:t,accessibilityLabel:r,badge:o,id:p,panelID:b,url:v,onAction:T,actions:a,disabled:i,isModalLoading:u,icon:d,siblingTabHasFocus:f,measuring:E,focused:P,selected:h,onToggleModal:y,onTogglePopover:C,viewNames:c,tabIndexOverride:w,disclosureZIndexOverride:J,onFocus:H},x)=>{const I=X(),[K,ne]=n.useState(!1),[R,Q]=n.useState(null),Y=n.useRef(h),D=n.useRef(!1),N=n.useRef(null);n.useEffect(()=>{C(K)},[K,C]),n.useEffect(()=>{y(!!R)},[R,y]),n.useEffect(()=>()=>{y(!1),C(!1)},[y,C]),n.useEffect(()=>{if(E)return;(P||document.activeElement&&document.activeElement.id===p)&&h&&b!=null&&!D.current&&(Fe(b),D.current=!0),h&&!Y.current&&b!=null?Fe(b):P&&N.current!=null&&R==null&&!i&&G(N.current),Y.current=h},[P,p,t,E,b,h,R,i]);let $;h&&!f&&!E||P&&!E?$=0:$=-1,w!=null&&($=w);const O=a==null?void 0:a.find(g=>g.type==="rename"),_=a==null?void 0:a.find(g=>g.type==="duplicate"),L=a==null?void 0:a.find(g=>g.type==="delete"),U=n.useCallback(()=>{a!=null&&a.length&&ne(g=>!g)},[a]),ee=n.useCallback(()=>{i||(h?U():T==null||T())},[h,T,U,i]),de=g=>{Q(g)},B=()=>{Q(null)},me=n.useCallback(async g=>{var k;await((k=O==null?void 0:O.onPrimaryAction)==null?void 0:k.call(O,g)),setTimeout(()=>{N.current&&G(N.current)},250)},[O]),fe=n.useCallback(async()=>{var g;await((g=L==null?void 0:L.onPrimaryAction)==null?void 0:g.call(L,t)),B()},[L,t]),be=n.useCallback(async g=>{var k;await((k=_==null?void 0:_.onPrimaryAction)==null?void 0:k.call(_,g))},[_]),Te={rename:{icon:Ue,content:I.translate("Polaris.Tabs.Tab.rename")},duplicate:{icon:He,content:I.translate("Polaris.Tabs.Tab.duplicate")},edit:{icon:Ke,content:I.translate("Polaris.Tabs.Tab.edit")},"edit-columns":{icon:ze,content:I.translate("Polaris.Tabs.Tab.editColumns")},delete:{icon:xe,content:I.translate("Polaris.Tabs.Tab.delete"),destructive:!0}},se=a==null?void 0:a.map(({type:g,onAction:k,onPrimaryAction:Ge,...ie})=>{const Me=!g.includes("edit");return{...Te[g],...ie,onAction:()=>{k==null||k(t),U(),Me&&de(g)}}}),oe=n.useCallback(g=>{g.key===" "&&(g.preventDefault(),ee())},[ee]),he=S(m.TabContainer,h&&m.Underline),te=i||h?void 0:v,pe=te?$e:je,ve=S(m.Tab,d&&m["Tab-iconOnly"],K&&m["Tab-popoverActive"],h&&m["Tab-active"],h&&(a==null?void 0:a.length)&&m["Tab-hasActions"]),Ee=o?e.createElement(at,{tone:h?void 0:"new"},o):null,re=h&&(a!=null&&a.length)?e.createElement("div",{className:S(m.IconWrap)},e.createElement(Ce,{source:Ve})):null,z=e.createElement(pe,{id:p,className:ve,tabIndex:$,"aria-selected":h,"aria-controls":b,"aria-label":r,role:w==null?"tab":void 0,disabled:i,url:te,onFocus:H,onMouseUp:et,onClick:ee,onKeyDown:oe},e.createElement(tt,{gap:"200",align:"center",blockAlign:"center",wrap:!1},e.createElement(we,{as:"span",variant:"bodySm",fontWeight:"medium"},d??t),Ee),re),le=!h||!(a!=null&&a.length),q=O?e.createElement(ut,{name:t,open:R==="rename",onClose:B,onClickPrimaryAction:me,isModalLoading:u,viewNames:c}):null,Pe=_?e.createElement(it,{open:R==="duplicate",name:I.translate("Polaris.Tabs.Tab.copy",{name:t}),onClose:B,onClickPrimaryAction:be,isModalLoading:u,viewNames:c||[]}):null,ge=L?e.createElement(j,{open:R==="delete",onClose:B,primaryAction:{content:I.translate("Polaris.Tabs.Tab.deleteModal.delete"),onAction:fe,destructive:!0,disabled:u},secondaryActions:[{content:I.translate("Polaris.Tabs.Tab.deleteModal.cancel"),onAction:B}],title:I.translate("Polaris.Tabs.Tab.deleteModal.title"),instant:!0},e.createElement(j.Section,null,I.translate("Polaris.Tabs.Tab.deleteModal.description",{viewName:t}))):null,ce=le||i?z:e.createElement(e.Fragment,null,e.createElement(Ze,{active:K,activator:z,autofocusTarget:"first-node",onClose:U,zIndexOverride:J},e.createElement("div",{className:m.ActionListWrap},e.createElement(Ye,{actionRole:"menuitem",items:se}))),q,Pe,ge);return d?ce:e.createElement("li",{className:he,ref:dt([N,x]),role:"presentation"},ce)});ue.displayName="Tab";function Fe(t){const r=document.getElementById(t);r&&r.focus({preventScroll:!0})}function dt(t){return r=>{for(const o of t)o!=null&&(o.current=r)}}function We({hidden:t,id:r,tabID:o,children:p}){const b=S(m.Panel,t&&m["Panel-hidden"]);return e.createElement("div",{className:b,id:r,role:"tabpanel","aria-labelledby":o,tabIndex:-1},p)}const mt=n.memo(function({id:r,focused:o,children:p,url:b,accessibilityLabel:v,onClick:T=ft}){const a=n.useRef(null);n.useEffect(()=>{const f=a.current;f&&f instanceof HTMLElement&&o&&requestAnimationFrame(()=>{f.focus()})},[a,o]);const i=S(m.Item),u={id:r,ref:a,onClick:T,className:i,"aria-selected":!1,"aria-label":v},d=b?e.createElement($e,Object.assign({},u,{url:b}),p):e.createElement("button",Object.assign({},u,{ref:a,type:"button"}),p);return e.createElement("li",null,d)});function ft(){}function bt({focusIndex:t,disclosureTabs:r,onClick:o=Se,onKeyPress:p=Se}){const b=r.map(({id:v,content:T,...a},i)=>e.createElement(mt,Object.assign({key:v},a,{id:v,focused:i===t,onClick:o.bind(null,v)}),T));return e.createElement("ul",{className:m.List,onKeyDown:Tt,onKeyUp:p},b)}function Se(){}function Tt(t){const{key:r}=t;(r==="ArrowLeft"||r==="ArrowRight")&&(t.preventDefault(),t.stopPropagation())}const Re=40;function ht({activator:t,open:r,onClose:o,onClickPrimaryAction:p,onClickSecondaryAction:b,viewNames:v}){const T=X(),[a,i]=n.useState(""),[u,d]=n.useState(!1),f=n.useRef(null),E=ct(),P=v.some(w=>w.trim().toLowerCase()===a.trim().toLowerCase()),h=!a||P||u||a.length>Re;n.useEffect(()=>{if(!(!f.current||E)&&r){G(f.current);const w=setTimeout(()=>{f.current&&G(f.current)},50);return()=>clearTimeout(w)}},[r,E]);const y=n.useCallback(w=>{i(w)},[]);async function C(){P||h||(d(!0),await p(a),d(!1),i(""),o())}function c(){b==null||b(),i(""),o()}return e.createElement(j,{activator:t,open:r,onClose:o,title:T.translate("Polaris.Tabs.CreateViewModal.title"),primaryAction:{content:T.translate("Polaris.Tabs.CreateViewModal.create"),onAction:C,disabled:h},secondaryActions:[{content:T.translate("Polaris.Tabs.CreateViewModal.cancel"),onAction:c}]},e.createElement(j.Section,null,e.createElement(De,{onSubmit:C},e.createElement(Ie,null,e.createElement("div",{ref:f},e.createElement(Ae,{label:T.translate("Polaris.Tabs.CreateViewModal.label"),value:a,onChange:y,autoComplete:"off",maxLength:Re,showCharacterCount:!0,error:P?T.translate("Polaris.Tabs.CreateViewModal.errors.sameName",{name:a}):void 0}))))))}const pt=n.memo(function({selected:r,tabs:o,activator:p,tabToFocus:b,siblingTabHasFocus:v,handleMeasurement:T}){const a=n.useRef(null),i=n.useRef(null),u=n.useCallback(()=>{i.current&&cancelAnimationFrame(i.current),i.current=requestAnimationFrame(()=>{if(!a.current)return;const E=a.current.offsetWidth-20-28,P=a.current.children,y=Array.from(P).map(c=>Math.ceil(c.getBoundingClientRect().width)+4),C=y.pop()||0;T({containerWidth:E,disclosureWidth:C,hiddenTabWidths:y})})},[T]);n.useEffect(()=>{u()},[u,o]),nt(()=>{});const d=o.map((E,P)=>e.createElement(ue,{measuring:!0,key:`$${E.id}Hidden`,id:`${E.id}Measurer`,siblingTabHasFocus:v,focused:P===b,selected:P===r,url:E.url,content:E.content,onTogglePopover:Oe,onToggleModal:Oe})),f=S(m.Tabs,m.TabsMeasurer);return Be("resize",u),e.createElement("div",{className:f,ref:a},d,p)});function Oe(){}const vt="create-new-view",Ct=({tabs:t,children:r,selected:o,newViewAccessibilityLabel:p,canCreateNewView:b,disabled:v,onCreateNewView:T,onSelect:a,fitted:i,disclosureText:u,disclosureZIndexOverride:d})=>{const f=X(),{mdDown:E}=rt(),P=n.useRef(null),h=n.useRef(null),y=n.useRef(null),[C,c]=n.useReducer((s,l)=>({...s,...l}),{disclosureWidth:0,containerWidth:1/0,tabWidths:[],visibleTabs:[],hiddenTabs:[],showDisclosure:!1,tabToFocus:-1,isNewViewModalActive:!1,modalSubmitted:!1,isTabsFocused:!1,isTabPopoverOpen:!1,isTabModalOpen:!1}),{tabToFocus:w,visibleTabs:J,hiddenTabs:H,showDisclosure:x,isNewViewModalActive:I,modalSubmitted:K,disclosureWidth:ne,tabWidths:R,containerWidth:Q,isTabsFocused:Y,isTabModalOpen:D,isTabPopoverOpen:N}=C,$=Le(D),O=Le(N);n.useEffect(()=>{$&&!D?c({isTabsFocused:!0,tabToFocus:o}):O&&!N&&!D&&c({isTabsFocused:!0,tabToFocus:o})},[O,N,$,D,o,w]);const _=n.useCallback(s=>c({isTabPopoverOpen:s}),[]),L=n.useCallback(s=>c({isTabModalOpen:s}),[]),U=()=>{c({isNewViewModalActive:!1})},ee=async s=>{if(!T)return!1;const l=await(T==null?void 0:T(s));return l&&c({modalSubmitted:!0}),l},de=()=>{c({isNewViewModalActive:!0})},B=n.useCallback(s=>{const l=t.find(A=>A.id===s);if(l==null)return null;const M=t.indexOf(l);a==null||a(M)},[t,a]),me=n.useCallback((s,l)=>{const M=()=>{var F;B(s.id),(F=s.onAction)==null||F.call(s)},A=t.map(({content:F})=>F),V=s.panelID||`${s.id}-panel`;return e.createElement(ue,Object.assign({},s,{key:`${l}-${s.id}`,id:s.id,panelID:r?V:void 0,disabled:v||s.disabled,siblingTabHasFocus:w>-1,focused:l===w,selected:l===o,onAction:M,accessibilityLabel:s.accessibilityLabel,url:s.url,content:s.content,onToggleModal:L,onTogglePopover:_,viewNames:A,disclosureZIndexOverride:d,ref:l===o?y:null}))},[v,t,r,o,w,d,B,L,_]),fe=n.useCallback(s=>{const l=s.target,M=l.classList.contains(m.Item),A=l.closest("[data-tabs-focus-catchment]")||M;l.classList.contains(m.DisclosureActivator)||!A||c({isTabsFocused:!0})},[]),be=n.useCallback(s=>{var ae,Z,W;const l=s.target,M=s.relatedTarget,A=(ae=M==null?void 0:M.closest)==null?void 0:ae.call(M,`.${m.Tabs}`),V=(W=(Z=l==null?void 0:l.classList)==null?void 0:Z.contains)==null?void 0:W.call(Z,m.Tab),F=M==null?void 0:M.classList.contains(m.Item);if(!M&&!D&&!V&&!F){c({tabToFocus:-1});return}if(!A&&!D&&!V&&!F){c({tabToFocus:-1});return}c({isTabsFocused:!1})},[D]),Te=s=>{if(N||D||I)return;const{key:l}=s;(l==="ArrowLeft"||l==="ArrowRight")&&(s.preventDefault(),s.stopPropagation())};n.useEffect(()=>{const{visibleTabs:s,hiddenTabs:l}=ke(t,o,ne,R,Q);c({visibleTabs:s,hiddenTabs:l})},[Q,ne,t,o,R,c]);const se=n.useCallback(()=>{var l;const s=(l=y.current)==null?void 0:l.querySelector(`.${m["Tab-active"]}`);s&&Ee(s.offsetLeft)},[]);n.useEffect(()=>{E&&se()},[se,o,E]),n.useEffect(()=>{Y&&!x&&c({tabToFocus:o})},[Y,o,c,x]);const oe=s=>{const{showDisclosure:l,visibleTabs:M,hiddenTabs:A,tabToFocus:V,isNewViewModalActive:F}=C;if(D||N||F)return;const ae=s.key,Z=l||E?M.concat(A):[...M];let W=Z.indexOf(V);ae==="ArrowRight"&&(W+=1,W===Z.length&&(W=0)),ae==="ArrowLeft"&&(W===-1||W===0?W=Z.length-1:W-=1);const _e=Z[W];_e!=null&&c({tabToFocus:_e})},he=()=>{c({showDisclosure:!x,tabToFocus:H[0]})},te=()=>{c({showDisclosure:!1})},pe=n.useCallback(s=>{const{hiddenTabWidths:l,containerWidth:M,disclosureWidth:A}=s,{visibleTabs:V,hiddenTabs:F}=ke(t,o,A,l,M);c({visibleTabs:V,hiddenTabs:F,disclosureWidth:A,containerWidth:M,tabWidths:l})},[t,o,c]),ve=s=>{B(s),te(),c({isTabsFocused:!0})},Ee=s=>{setTimeout(()=>{var l,M;if(P.current&&typeof P.current.scroll=="function"){const A=((l=h==null?void 0:h.current)==null?void 0:l.offsetLeft)||0;(M=P==null?void 0:P.current)==null||M.scroll({left:s-A})}},0)},re=p||f.translate("Polaris.Tabs.newViewAccessibilityLabel"),z=E?[...J,...H]:J,le=z.sort((s,l)=>s-l).filter(s=>t[s]).map(s=>me(t[s],s)),q=J.length<t.length&&!E,Pe=S(m.Tabs,i&&m.fitted,q&&m.fillSpace),ge=S(m.Wrapper,b&&m.WrapperWithNewButton),ce=S(m.DisclosureTab,q&&m["DisclosureTab-visible"]),g=S(m.DisclosureActivator),k=e.createElement(e.Fragment,null,e.createElement(we,{as:"span",variant:"bodySm",fontWeight:"medium"},u??f.translate("Polaris.Tabs.toggleTabsLabel")),e.createElement("div",{className:S(m.IconWrap,q&&x&&m["IconWrap-open"])},e.createElement(Ce,{source:Ve,tone:"subdued"}))),ie=e.createElement(je,{type:"button",className:g,onClick:he,"aria-label":u??f.translate("Polaris.Tabs.toggleTabsLabel"),disabled:v},k),Me=H.map(s=>t[s]),Xe=t.map(({content:s})=>s),Je=e.createElement(pt,{tabToFocus:w,activator:ie,selected:o,tabs:t,siblingTabHasFocus:w>-1,handleMeasurement:pe}),Ne=e.createElement(ue,{id:vt,content:re,actions:[],onAction:de,onFocus:()=>{K&&c({tabToFocus:o,modalSubmitted:!1})},icon:e.createElement(Ce,{source:qe,accessibilityLabel:re}),disabled:v,onTogglePopover:_,onToggleModal:L,tabIndexOverride:0}),Qe=r?t.map((s,l)=>o===l?e.createElement(We,{id:t[l].panelID||`${t[l].id}-panel`,tabID:t[l].id,key:t[l].id},r):e.createElement(We,{id:t[l].panelID||`${t[l].id}-panel`,tabID:t[l].id,key:t[l].id,hidden:!0})):null;return e.createElement("div",{className:m.Outer},e.createElement(st,{padding:{md:"200"}},Je,e.createElement("div",{className:ge,ref:P},e.createElement("div",{className:m.ButtonWrapper,ref:h},e.createElement("ul",{role:le.length>0?"tablist":void 0,className:Pe,onFocus:fe,onBlur:be,onKeyDown:Te,onKeyUp:oe,"data-tabs-focus-catchment":!0},le,E||z.length===0?null:e.createElement("li",{className:ce,role:"presentation"},e.createElement(Ze,{preferredPosition:"below",preferredAlignment:"left",activator:ie,active:q&&x,onClose:te,autofocusTarget:"first-node",zIndexOverride:d},e.createElement(bt,{focusIndex:H.indexOf(w),disclosureTabs:Me,onClick:ve,onKeyPress:oe})))),b&&z.length>0?e.createElement("div",{className:m.NewTab},e.createElement(ht,{open:I,onClose:U,onClickPrimaryAction:ee,viewNames:Xe,activator:v?Ne:e.createElement("div",null,e.createElement(ot,{content:f.translate("Polaris.Tabs.newViewTooltip"),preferredPosition:"above",hoverDelay:400,zIndexOverride:d},Ne))})):null))),Qe)};export{Ct as T};
