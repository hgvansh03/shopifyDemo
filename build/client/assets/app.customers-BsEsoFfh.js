import{r as h,R as n,j as t}from"./index-DIrg4KX8.js";import{u as F}from"./components-4iL-Yhb0.js";import{u as O,d as C,v as A,I as P,b as S,T as y,c as R,P as H,C as W,a as X}from"./Page-Ca4k7FYh.js";import{a as $}from"./context-6NiORI7R.js";import{I as U}from"./Image-DqtWbd5n.js";import{T as V,L}from"./TitleBar-C3pslk-9.js";import{D as Z}from"./DataTable-D7lJGE9G.js";var o={Avatar:"Polaris-Avatar",imageHasLoaded:"Polaris-Avatar--imageHasLoaded",Text:"Polaris-Avatar__Text",long:"Polaris-Avatar--long",hidden:"Polaris-Avatar--hidden",sizeXs:"Polaris-Avatar--sizeXs",sizeSm:"Polaris-Avatar--sizeSm",sizeMd:"Polaris-Avatar--sizeMd",sizeLg:"Polaris-Avatar--sizeLg",sizeXl:"Polaris-Avatar--sizeXl",styleOne:"Polaris-Avatar--styleOne",styleTwo:"Polaris-Avatar--styleTwo",styleThree:"Polaris-Avatar--styleThree",styleFour:"Polaris-Avatar--styleFour",styleFive:"Polaris-Avatar--styleFive",styleSix:"Polaris-Avatar--styleSix",styleSeven:"Polaris-Avatar--styleSeven",Image:"Polaris-Avatar__Image",Initials:"Polaris-Avatar__Initials",Svg:"Polaris-Avatar__Svg"},l=function(a){return a.Pending="PENDING",a.Loaded="LOADED",a.Errored="ERRORED",a}(l||{});const p=["one","two","three","four","five","six","seven"],E={xs:"3",sm:"2.5",md:"2.5",lg:"2.5",xl:"2"};function G(a){let s=0;for(const i of a)s^=i.charCodeAt(0);return s}function Y(a){return a?p[G(a)%p.length]:p[0]}function q({name:a,source:s,onError:i,initials:r,customer:u,size:c="md",accessibilityLabel:e}){const d=O(),g=$(),[v,x]=h.useState(l.Pending);h.useEffect(()=>{x(l.Pending)},[s]);const N=h.useCallback(()=>{x(l.Errored),i&&i()},[i]),j=h.useCallback(()=>{x(l.Loaded)},[]),f=s&&v!==l.Errored,I=a||r;let m;if(e)m=e;else if(a)m=a;else if(r){const B=r.split("").join(" ");m=d.translate("Polaris.Avatar.labelWithInitials",{initials:B})}const T=C(o.Avatar,c&&o[A("size",c)],f&&v===l.Loaded&&o.imageHasLoaded,!u&&!f&&o[A("style",Y(I))]),k=C(o.Text,((r==null?void 0:r.length)||0)>2&&o.long),D=C(o.Image,v!==l.Loaded&&o.hidden),b=s&&g&&v!==l.Errored?n.createElement(U,{className:D,source:s,alt:"",role:"presentation",onLoad:j,onError:N}):null,w="0.35em",z=n.createElement(n.Fragment,null,n.createElement("path",{fill:"none",d:"M25.5 13.5C25.5 16.5376 23.0376 19 20 19C16.9624 19 14.5 16.5376 14.5 13.5C14.5 10.4624 16.9624 8 20 8C23.0376 8 25.5 10.4624 25.5 13.5Z",stroke:"currentColor",strokeWidth:E[c]}),n.createElement("path",{fill:"none",d:"M10.3433 29.682L9.47 31.254C9.03481 32.0373 9.60125 33 10.4974 33H29.5026C30.3988 33 30.9652 32.0373 30.53 31.254L29.6567 29.682C27.7084 26.175 24.0119 24 20 24C15.9882 24 12.2916 26.175 10.3433 29.682Z",stroke:"currentColor",strokeWidth:E[c],strokeLinecap:"round",strokeLinejoin:"round"})),M=u||!r?z:n.createElement("text",{className:k,x:"50%",y:"50%",dy:w,fill:"currentColor",textAnchor:"middle"},r),_=f?null:n.createElement("span",{className:o.Initials},n.createElement("svg",{className:o.Svg,viewBox:"0 0 40 40"},M));return n.createElement("span",{"aria-label":m,role:m?"img":"presentation",className:T},_,b)}function re(){const{customers:a}=F(),[s,i]=h.useState(""),r=a.filter(e=>{const d=s.toLowerCase();return e.firstName.toLowerCase().includes(d)||e.lastName.toLowerCase().includes(d)||e.email.toLowerCase().includes(d)}),u=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),c=r.map(e=>[t.jsxs(P,{gap:"300",children:[t.jsx(q,{customer:!0,name:`${e.firstName} ${e.lastName}`,size:"small"}),t.jsxs(S,{gap:"025",children:[t.jsxs(y,{variant:"bodyMd",fontWeight:"medium",children:[e.firstName," ",e.lastName]}),t.jsx(y,{variant:"bodySm",tone:"subdued",children:e.email})]})]},e.id),e.phone||"N/A",u(e.createdAt),e.ordersCount,`$${e.totalSpent}`,t.jsx(P,{gap:"100",children:e.tags.map((d,g)=>t.jsx(R,{tone:"info",children:d},g))},e.id)]);return t.jsxs(H,{children:[t.jsx(V,{title:"Customers"}),t.jsx(L,{children:t.jsx(L.Section,{children:t.jsx(W,{children:t.jsxs(S,{gap:"400",children:[t.jsx(X,{label:"Search customers",value:s,onChange:i,placeholder:"Search by name or email...",clearButton:!0,onClearButtonClick:()=>i("")}),t.jsx(Z,{columnContentTypes:["text","text","text","numeric","text","text"],headings:["Customer","Phone","Date Created","Orders","Total Spent","Tags"],rows:c,pagination:{hasNext:!1,hasPrevious:!1}})]})})})})]})}export{re as default};
